"use strict";(()=>{var e={};e.id=574,e.ids=[574],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7920:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>P});var a={};t.r(a),t.d(a,{POST:()=>p});var o=t(5419),n=t(9108),s=t(9678),i=t(8070);let u=require("buffer");async function p(e){try{let{total:r}=await e.json();if(!r||isNaN(r))return i.Z.json({error:"Invalid total amount"},{status:400});let t=u.Buffer.from("ASvsybypINh7M5S7EUHlFSX6RX-P18TvDiCsgbWh18w3cBIYK0oYv8Wt_kFeJ5ISKs7wRdqm0J9jmMlD:ELZzWyYxm00AUrvgLKR_MPwY_D6Zmcsmk6Wk0pyYKF425kwKHVX0V_h5klgSc6873CmUL61MsfAr3GVG").toString("base64"),a=await fetch("https://api-m.sandbox.paypal.com/v1/oauth2/token",{method:"POST",headers:{Authorization:`Basic ${t}`,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=client_credentials"}),o=await a.json();if(!a.ok)return console.error("Failed to fetch PayPal token:",o),i.Z.json({error:"PayPal auth failed"},{status:a.status});let n=o.access_token,s=await fetch("https://api-m.sandbox.paypal.com/v2/checkout/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:Number(r).toFixed(2)},description:"University Catering Order"}]})}),p=await s.json();if(!s.ok)return console.error("PayPal API error:",p),i.Z.json({error:"PayPal API error"},{status:s.status});return i.Z.json(p)}catch(e){return console.error("Error creating PayPal order:",e),i.Z.json({error:"Failed to create PayPal order"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/paypal/create-order/route",pathname:"/api/paypal/create-order",filename:"route",bundlePath:"app/api/paypal/create-order/route"},resolvedPagePath:"/Users/hellosauri/Downloads/project 2/src/app/api/paypal/create-order/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h,headerHooks:y,staticGenerationBailout:P}=c,m="/api/paypal/create-order/route";function f(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,206],()=>t(7920));module.exports=a})();